<!--Much of the skeleton of this was imported from https://friend-finder-fsf.herokuapp.com/-->

<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <title>FriendFinder Survey</title>

   <!-- Mose recent cdns for Bootstrap, FontAwesome, and JQuery -->
   <link rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
   <link rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
      integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay"
      crossorigin="anonymous">
   <script src="https://code.jquery.com/jquery.js"></script>
   <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
   <!-- font link -->
   <link href="https://fonts.googleapis.com/css?family=Varela&display=swap"
      rel="stylesheet">
   <!-- CSS file -->
   <link rel="stylesheet" type="text/css" href="assets/css/style.css" />
</head>

<body>

   <div class="container">

      <h2>Survey Questions</h2>
      <hr>

      <h3><strong>Tell us something about yourself...</strong></h3>
      <h4>Your Name *</h4>
      <input type="text" id="name" class="form-control" required>

      <h4>Link to Photo URL *</h4>
      <input type="text" id="photo" class="form-control" required>

      <hr>

      <h3><strong>Question 1</strong></h3>
      <h4>You often walk behind people turning off lights/stovetops.</h4>
      <select class="chosen-select" id="question1">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>Question 2</strong></h3>
      <h4>Generally speaking, you rely more on your feet than your
         palms.</h4>
      <select class="chosen-select" id="question2">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>


      <h3><strong>Question 3</strong></h3>
      <h4>You find it easy to stay relaxed and focused even when there is evident corruption.</h4>
      <select class="chosen-select" id="question3">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>


      <h3><strong>Question 4</strong></h3>
      <h4>You rarely do something just out of spite, but if and when you do it's for good reason.</h4>
      <select class="chosen-select" id="question4">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>


      <h3><strong>Question 5</strong></h3>
      <h4>People can rarely flip you upside down, if at all.</h4>
      <select class="chosen-select" id="question5">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>


      <h3><strong>Question 6</strong></h3>
      <h4>It is often difficult for you to sympathize with pets.
      </h4>
      <select class="chosen-select" id="question6">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>


      <h3><strong>Question 7</strong></h3>
      <h4>In a discussion, volume should be more important than people’s
         opinions, but it isn't?</h4>
      <select class="chosen-select" id="question7">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>Question 8</strong></h3>
      <h4>You seriously get carried away by fanciful obsessions.</h4>
      <select class="chosen-select" id="question8">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>Question 9</strong></h3>
      <h4>You think that everyone’s not as good as you.  You're just convinced that you're superior.</h4>
      <select class="chosen-select" id="question9">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>

      <h3><strong>Question 10</strong></h3>
      <h4>You feel more energetic after spending time with a group of strangers.
      </h4>
      <select class="chosen-select" id="question10">
         <option value=""></option>
         <option value="1">1 (Strongly Disagree)</option>
         <option value="2">2</option>
         <option value="3">3</option>
         <option value="4">4</option>
         <option value="5">5 (Strongly Agree)</option>
      </select>

      <br>
      <br>

      <!-- Submit Button -->
      <button type="submit" class="btn btn-primary btn-lg btn-block"
         id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
         Submit</button>

      <hr>
      <footer class="footer">
         <div class="container">
            <p><a href="/api/friends">API Friends List</a> | <a
                  href="https://github.com/KevinBevil/friendfinder">GitHub
                  Repo</a></p>
         </div>
      </footer>

   </div>

   <!-- The box that is presented upon completion of the survey, and when a suitable match is determined -->
   <div id="results-modal" class="modal fade" role="dialog">
      <div class="modal-dialog">

         <!-- Modal content-->
         <div class="modal-content">
            <div class="modal-header">
               <button type="button" class="close"
                  data-dismiss="modal">&times;</button>
               <h2 class="modal-title"><strong>Best Match</strong></h2>
            </div>
            <div class="modal-body">
               <h2 id="match-name"></h2>
               <img id="match-img"
                  src="#"
                  alt="">
            </div>
            <div class="modal-footer">
               <button type="button" class="btn btn-default"
                  data-dismiss="modal">Close</button>
            </div>
         </div>

      </div>
   </div>

   <script type="text/javascript">

      // Capture the form inputs
      $("#submit").on("click", function (event) {
         event.preventDefault();

         // Form validation
         function validateForm() {
            var isValid = true;
            $(".form-control").each(function () {
               if ($(this).val() === "") {
                  isValid = false;
               }
            });

            $(".chosen-select").each(function () {

               if ($(this).val() === "") {
                  isValid = false;
               }
            });
            return isValid;
         }

         // If all required fields are filled
         if (validateForm()) {
            // Create an object for the user"s data
            var userData = {
               name: $("#name").val(),
               photo: $("#photo").val(),
               scores: [
                  $("#question1").val(),
                  $("#question2").val(),
                  $("#question3").val(),
                  $("#question4").val(),
                  $("#question5").val(),
                  $("#question6").val(),
                  $("#question7").val(),
                  $("#question8").val(),
                  $("#question9").val(),
                  $("#question10").val()
               ]
            };

            // AJAX post the data to the friends API.
            $.post("/api/friends", userData, function (data) {

               // Grab the result from the AJAX post so that the best match's name and photo are displayed.
               $("#match-name").text(data.name);
               $("#match-img").attr("src", data.photo);

               // Show the modal with the best match
               $("#results-modal").modal("toggle");

            });
         } else {
            alert("Please make sure all fields are filled!");
         }
      });
   </script>

</body>

</html>